var Oe=Object.defineProperty;var jt=s=>{throw TypeError(s)};var Le=(s,t,e)=>t in s?Oe(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var B=(s,t,e)=>Le(s,typeof t!="symbol"?t+"":t,e),Rt=(s,t,e)=>t.has(s)||jt("Cannot "+e);var dt=(s,t,e)=>(Rt(s,t,"read from private field"),e?e.call(s):t.get(s)),Bt=(s,t,e)=>t.has(s)?jt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),ft=(s,t,e,r)=>(Rt(s,t,"write to private field"),r?r.call(s,e):t.set(s,e),e);var Wt=(s,t,e,r)=>({set _(i){ft(s,t,i,e)},get _(){return dt(s,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();const w=s=>!0,u=null,Ee=void 0,It=Object,Ut=It.fromEntries,et=It.entries,m=It.assign,le=Array,E=le.from,c=async(s,t)=>{let e=0,r=async()=>{for(let n of s)await t(n,e,s),e++},i=()=>{for(let n of s)t(n,e,s),e++};return ue(t)?r():i()},M=(s,t)=>E(s).map(t),st=(s,t)=>typeof s===t,wt=(s,t)=>t.includes(s),ce=s=>st(s,"string"),ct=s=>st(s,"boolean"),Ce=s=>st(s,"number"),Ne=s=>st(s,"object"),N=s=>st(s,"function"),ue=s=>D(s,(async()=>0).constructor),R=s=>s===void 0,Ae=s=>s===u,kt=le.isArray,D=(s,...t)=>!!t.find(e=>s instanceof e),Ht=(s,t)=>D(s,t)?s:u,W=JSON.stringify,Te=JSON.parse,Ft=(s,...t)=>!!t.find(e=>s.startsWith(e)),_t=Promise,vt="abcdefghijklmnopqrstuvwxyz",Gt=vt.toUpperCase(),je=s=>{s={length:5,lettercase:"any",...s};const t=s.lettercase==="any"?vt+Gt:s.lettercase==="lower"?vt:Gt;return E({length:s.length},(e,r)=>t[Math.round(Math.random()*t.length)]).join("")},qt=s=>{try{return[s(),u]}catch(t){return[u,D(t,Error)?t:new Error(W(t))]}},lt=URL,U=s=>D(s,lt)?s:Ft(s,"http")?new lt(s):w()?new lt(Ft(s,origin)?s:origin+s):new lt("https://localhost"+s),rt=Symbol("ProtoType"),A=Symbol("Statement");class H{static disposers=new Set;constructor(t){let e=t.root;if(e)return e.global}dispose(){c(H.disposers,t=>t(this))}}class p{static proto=u;static[rt]="Proto";static[A]=!1;protos=new Set;disposers=new Set;layout;#t=u;global=p.proto?.global??new H(this);constructor(t){this.layout=t??u}set parent(t){this.#t?.protos.delete(this),this.#t=t,t&&(this.global=t.global),t?.protos.add(this)}get parent(){return this.#t}get root(){return this.findAbove(t=>!t.parent)}get children(){return M(this.protos,t=>t.constructor[A]?t.children:t).flat()}build(t=!0){return this.clear(!0),$.context(p,this,()=>this.layout?.(this)),t&&c(this.protos,e=>{e.build()}),this}toString(){return M(this.protos,t=>`${t}`).join("")}toDOM(t=!0){return t?M(this.protos,e=>e.toDOM(t)).flat():[]}dispose(){c(this.disposers,t=>t()),c(this.protos,t=>t.dispose())}removeNode(){c(this.protos,t=>t.removeNode())}clear(t=!1){this.protos.clear(),t&&c(this.protos,e=>e.dispose())}findAbove(t){let e=this.parent;return e?t(e)?e:e.findAbove(t):u}findBelow(t){for(let e of this.protos){if(t(e))return e;let r=e.findBelow(t);if(r)return r}return u}}class Ot extends p{node=u;modifiers=new Set;constructor(t){super(t)}ondom(t){this.modifiers.add(t)}removeNode(){this.node?.remove()}}const Re=["img","hr","br","input","link","meta"];class it extends Ot{name;#t=new Map;#e="";constructor(t,e,r){super(()=>r?.(this)),this.name=t,e&&this.attrProcess(e)}on(t,e){this.ondom(r=>{r.addEventListener(t,e),this.disposers.add(()=>r.removeEventListener(t,e))})}toString(){return this.parseHTML()}parseHTML(t){let e=this.name,r=t?.children??(this.#e||M(this.protos,o=>`${o}`).join("")),i=t?.attr??M(this.#t,([o,a])=>a.length?`${o}="${a}"`:o).join(" "),n=i.length?" "+i:"";return Re.includes(e)?`<${e}${n} />`:`<${e}${n}>${r}</${e}>`}toDOM(t=!0){if(this.node)return[this.node];let e=document.createElement(this.name);return this.node=e,this.#e?this.node.innerHTML=this.#e:t&&e.append(...M(this.protos,r=>r.toDOM(t)).flat()),c(this.#t,([r,i])=>e.setAttribute(r,i)),c(this.modifiers,r=>r(e)),[e]}attrProcess(t){c(et(t),([e,r])=>{for(let i of $.process.attr){let n=i(e,r,this);if(!R(n))return}this.#t.set(e,r)})}innerHTML(t){this.#e=t}attr(t,e){return arguments.length?R(e)?this.#t.get(t):(Ae(e)?(this.#t.delete(t),this.node?.removeAttribute(t)):(this.#t.set(t,e),this.node?.setAttribute(t,e)),this):this.#t}addClass(...t){this.token("add","class",...t),this.node?.classList.add(...t)}removeClass(...t){this.token("delete","class",...t),this.node?.classList.remove(...t)}token(t,e,...r){let i=this.#t.get(e),n=new Set(i?.split(" ")??[]);c(r,o=>n[t](o)),this.#t.set(e,E(n).join(" "))}}class nt extends Ot{constructor(t){super(t),w()&&(this.node=new Text)}toDOM(){return[this.node,...super.toDOM()]}removeNode(){super.removeNode(),c(this.protos,t=>t.removeNode())}}class St extends Ot{content;constructor(t){super(),this.content=t}toString(){return this.content}toDOM(){if(this.node)return[this.node];let t=new Text(this.content);return this.node=t,c(this.modifiers,e=>e(t)),[t]}}const Be=(s,t)=>!1;function X(...s){const t=p.proto;let e=[];const r=a=>{a.parent=t,e.push(a)};for(let a of X.process.craft){let l=a(...s);if(!R(l))return l}const[i,n,o]=s;if(D(i,p))return r(i),i;if(ce(i)){let a=N(n)?[,n]:[n,o],l=new it(i,...a);return r(l),l}if(N(i)){let a=N(n)?[{},n]:[n,o],l=new i(...a);if(D(l,p))return r(l),l}if(kt(i)){let a=h=>{for(let y of X.process.text){let C=y(h);if(!R(C))return r(C)}let S=R(h)?u:new St(`${h}`);S&&r(S)},[l,...f]=s;return l.raw?c(l,(h,S)=>{let y=h.length?new St(h):u,C=f[S];y&&r(y),a(C)}):c(l,h=>a(h)),e}}(s=>{s.process={craft:new Set,text:new Set,attr:new Set},s.dispose=t=>{p.proto?.disposers.add(t)},s.render=(t,e)=>{if(e=N(e)?e():e,!Be()){let r=t.build().toDOM();e.replaceChildren(...r)}},s.context=(t,e,r)=>{let i=t.proto;t.proto=e,r(),t.proto=i},s.call=t=>t(),s.match=(t,e)=>{var r=new Map,i=Symbol("default"),n={case:(o,a)=>(r.set(o,a),n),default:o=>(r.set(i,o),n)};return e(n),r.get(t)?.()??r.get(i)?.()},s.stylesheet=w()?new CSSStyleSheet:u,s.styleMap=new Map,s.style=(t,e)=>{t&&s.styleMap.set(t,e),s.stylesheet?.insertRule(e)},s.stylesheet&&document.adoptedStyleSheets.push(s.stylesheet),w()&&document.querySelector("style#__ssr__")?.remove()})(X||(X={}));globalThis.$=X;const We=s=>{let t=new WeakMap;return class extends p{static[rt]="Widget";static stores=t;constructor(...e){super(()=>{let r=e[0]??{},i=e[1],{store:n,layout:o,ancestors:a}=s(r);n||(n={}),a&&c(a,l=>{let f=this.findAbove(h=>h.constructor===l);if(f){let h=l.stores.get(f);m(n,h)}}),t.set(this,n),o({store:n,children:l=>i?.(l)})})}}};m($,{widget(s){return We(s)}});let V=!1,Y=new Set,$t=s=>{V=!1;let t=s();return V=!0,t},Kt=s=>{V=!0;let t=s($t);return V=!1,t},he=new WeakMap,Z=s=>he.get(s);class tt{key;constructor(t){const e=()=>(V&&Y.add(this),Z(e).value);return Object.setPrototypeOf(e,this),he.set(e,{value:t,subs:new Set}),this.key=e,e}get value(){return Z(this.key).value}get subs(){return Z(this.key).subs}set(t){N(t)?this.set(t(this.value)):this.value!==t&&(Z(this).value=t,this.emit())}modify(t){t(this.value),this.emit()}emit(){c(Z(this).subs,t=>t(this.value))}subscribe(t){this.subs.add(t)}unsubscribe(t){this.subs.delete(t)}toString(){return`${this.value}`}}m($,{signal(s){return new tt(s)},effect(s){Kt(s),c(Y,t=>t.subscribe(e=>s($t))),Y.clear()},compute(s){let t=Kt(s),e=new tt(t);return c(Y,r=>r.subscribe(i=>e.set(s($t)))),Y.clear(),e}});let de=s=>{if(D(s,tt)){let t=new St(`${s}`);t.ondom(r=>{let i=n=>r.textContent=`${n}`;s.subscribe(i),t.disposers.add(()=>s.unsubscribe(i))});let e=r=>t.content=`${r}`;return s.subscribe(e),e(s.value),t.parent=p.proto,t}},Ue=(s,t,e)=>{s in t?t[s]=e.value:t.setAttribute(s,`${e}`)};$.process.text.add(de);$.process.craft.add(de);$.process.attr.add((s,t,e)=>{if(D(t,tt)){if(e.name==="input"){if(wt(s,["value","checked"])){e.on("input",i=>t.set(i.currentTarget[s]));let r=t.value;ct(r)?r&&e.attr(s,""):e.attr(s,`${r}`)}}else e.ondom(r=>{let i=()=>Ue(s,r,t);t.subscribe(i),i(),e.disposers.add(()=>t.unsubscribe(i))});return!0}});const He=new WeakMap,Fe=new Set,zt=new Map;class fe{}class Lt extends fe{declarations=new Map;rules=new Map;selector;parent=u;css;constructor(t,e,r){super(),this.selector=t,this.parent=r,e&&Ge(this,e),this.css=e}toString(){let t=M(this.declarations,([r,i])=>`${r.replaceAll(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}: ${i};`),e=M(this.rules,([r,i])=>`${i}`);return`${this.selector} { ${[...t,...e].join(" ")} }`}}const Ge=(s,t)=>{for(let[e,r]of et(t))if(ce(r)||Ce(r)||D(r,fe))s.declarations.set(e,`${r}`);else{let i=s.selector.startsWith("@")&&!s.parent?e:`${/^[@]|&/.test(e)?e:`& ${e}`}`;s.rules.set(i,new Lt(i,r,s))}},Jt=(s,t,e=!0)=>{let r=e?W(t):"";if(e){let n=zt.get(r);if(n)return n}let i=new Lt(s(),t,u);return $.style(u,`${i}`),e&&zt.set(r,i),i},Zt=new Set,pe=(s="any")=>{const t=je({lettercase:s});return Zt.has(t)?pe(s):(Zt.add(t),t)};m($,{css(s){return D(s,Lt)?s:Jt(()=>`.${pe()}`,s)},CSS(s){return M(et(s),([t,e])=>{let r=Jt(()=>t,{...e,__selector__:t});return Fe.add(r),r})}});m(it.prototype,{css(...s){return c(s,t=>be(this,t)),this}});const be=(s,t)=>{let e=$.css(t),r=e.selector.slice(1);s.addClass(r),He.set(s,e)};$.process.attr.add((s,t,e)=>{if(s==="css")return be(e,t),!0});class xt extends nt{static[A]=!0;#t;list$;#e=new WeakMap;constructor(t,e){super(),this.list$=t,this.#t=e;let r=()=>{let{n:i,d:n}=this.run();if(c(i,l=>l.build()),!this.node?.parentNode)return;c(n,l=>l.removeNode());let o=w()?this.toDOM():[],a;c(o,l=>{l.parentNode?a=l:a=a?.parentNode?.insertBefore(l,a.nextSibling)})};this.list$.subscribe(r),this.disposers.add(()=>this.list$.unsubscribe(r))}build(){return this.#e=new WeakMap,this.run(),c(this.protos,t=>t.build()),this}run(){let t=[],e=new Set(this.protos);return this.clear(),c(this.list$.value,(r,i)=>{let n=this.#e.get(r);n?e.delete(n):(n=new qe,t.push(n),this.#e.set(r,n),n.layout=()=>this.#t(r,i)),n.parent=this}),{n:t,d:e}}removeNode(){this.node?.remove(),c(this.protos,t=>t.removeNode())}}class qe extends p{static[A]=!0}globalThis.For=xt;$.process.craft.add((s,t,e)=>{if(s===xt){let r=new xt(t,e);return r.parent=p.proto,r}});class Et extends p{static[A]=!0;exp$;builded=!1;constructor(t,e){super(e),this.exp$=t}build(t){return super.build(t),this.builded=!0,this}validate(){return this.exp$?!!this.exp$.value:!0}}class Pt extends Et{}class Mt extends Et{}class Dt extends Et{}class Yt extends nt{static[A]=!0;statements=new Set;statement=u;build(){super.build(!1),this.validate()?.build();let t=()=>{let e=this.validate();e?.builded||e?.build(),this.statement!==e&&(this.statement=e??u,c(this.statements,r=>r!==e&&r.removeNode()),this.node?.replaceWith(...this.toDOM()))};return c(this.statements,e=>{e.exp$?.subscribe(t),e.disposers.add(()=>e.exp$?.unsubscribe(t))}),this}validate(){this.clear();for(let t of this.statements)if(t.validate())return t.parent=this,t}}globalThis.If=Dt;globalThis.Else=Pt;globalThis.ElseIf=Mt;let pt=new WeakMap;$.process.craft.add((s,t,e)=>{let r=p.proto,i=r?pt.get(r):u;if(s===Dt&&(i=new Yt,r&&(i.parent=r,pt.set(r,i))),!D(i,Yt)){if(wt(s,[Pt,Mt]))throw"ElseIf/Else must be after If or ElseIf";return}if(wt(s,[Dt,Pt,Mt])){let n=D(t,tt)?[t,e]:[u,t],o=new s(...n);i.statements.add(o)}else{r&&pt.delete(r);return}return i});class Ct extends p{static[A]=!0;condition;constructor(t,e){super(e),this.condition=kt(t)?t:[t]}}class Nt extends p{static[A]=!0;constructor(t){super(t)}}class Q extends nt{static[A]=!0;exp$;cases=new Set;matched=u;#t=u;constructor(t,e){super(()=>{e((r,i,n)=>{$(r,i,n)})}),this.exp$=t}build(){super.build(),this.validate();let t=()=>{let e=this.matched,r=this.validate();e!==r&&(c(this.cases,i=>i!==r&&i.removeNode()),r!==this.#t&&this.#t?.removeNode(),this.node?.replaceWith(...this.toDOM()))};return c(this.cases,e=>{e.build(),this.exp$.subscribe(t),e.disposers.add(()=>this.exp$.unsubscribe(t))}),this.#t?.build(),this}case(t,e){let r=new Ct(t,e);return this.cases.add(r),r}default(t){let e=new Nt(t);return this.#t=e,e}validate(){this.clear();for(let t of this.cases)if(t.condition.includes(this.exp$.value))return t.parent=this,this.matched=t;if(this.#t)return this.#t.parent=this,this.matched=this.#t}}globalThis.Match=Q;globalThis.Case=Ct;globalThis.Default=Nt;$.process.craft.add((s,t,e)=>{if(s===Q){let r=new Q(t,e);return r.parent=p.proto,r}if(s===Ct)return Ht(p.proto,Q)?.case(t,e);if(s===Nt)return Ht(p.proto,Q)?.default(t)});class ye extends it{constructor(t,e){super("a",t,e),this.on("click",r=>{if(r.shiftKey||r.ctrlKey)return;r.preventDefault();let i=this.attr("target"),n=this.attr("href");n&&(i==="_replace"?$.replace(n):$.open(n,i))})}}class Ke extends ye{constructor(t,e){super(t,e),this.global.router.navlinks.add(this)}checkActive(){let t=this.attr("href");if(t){for(let e of this.global.router.matchPaths)if(U(e).href===U(t).href)return this.attr("active","");this.attr("active",u)}}}class ge extends nt{page=u;constructor(){super()}render(t){if(this.page!==t&&(this.clear(),this.layout=()=>$(t),t.parent=this,this.page!==t&&this.page?.removeNode(),this.page=t,this.node)){t.builded||t.build();let e=this.toDOM();this.node.replaceWith(...e),t.title&&(document.title=t.title,t.global.title=t.title)}}}class me extends p{slot=new ge;builded=!1;route;title=u;constructor(t,e,r){super(()=>e({params:r,slot:this.slot})),this.route=t}build(){return this.builded||(this.builded=!0),super.build()}}class G{routes=new Map;path;paths=new Map;validPaths=[];constructor(t){this.path=t,this.paths.set(t,Ee)}routing(t){let e=t.split("/"),r={},i="";t:for(let[o,a]of this.paths){r={};let l=o.split("/"),f=[];for(let h=0;h<Math.max(e.length,l.length);h++)f.push([l[h],e[h]]);e:for(let[h,S]of f){let y=()=>{i=""},C=()=>{i+=(i!=="/"?"/":"")+S};if(R(h))break e;if(R(S)){y();continue t}if(h?.includes(":")){let[q,ut]=h.split(":");if(!S.startsWith(q)){y();continue t}r[ut]=S.replace(q,""),C();continue e}if(h!==S){y();continue t}C()}if(!i)continue t;r={...r,...N(a)?a():a};break t}if(!i)return;let n=G.resolvePath(this.path,r);return this.validPaths=M(this.paths,o=>G.resolvePath(o[0],r)),[n,i,r]}static resolvePath(t,e){return t.replaceAll(/:([^/]+)/g,(r,i)=>`${e[i]}`)}alias(t,e){this.paths.set(t,e)}}class ze extends G{constructor(t){super(t)}async resolve(t,e,r){let i=this.routing(t);if(!i)return;let[,n,o]=i;r={...r,...o};let a=t.replace(n,"");for(let[l,f]of this.routes){let h=await f.resolve(a||"/",e,r);if(h)return[this,...h]}return[this]}}class Je extends G{pages=new Map;page=u;#t;constructor(t,e){super(t),this.#t=e}async resolve(t,e,r){let i=this.routing(t);if(!i)return;let[n,o,a]=i;r={...r,...a};let l=await this.usePage(n,r,e),f=t.replace(o,"");for(let[h,S]of this.routes){let y=await S.resolve(f||"/",l.slot,r);if(y)return[this,...y]}if(!f)return[this]}async usePage(t,e,r){let i=this.pages.get(t);if(!i){let n=this.#t,o;if(kt(n)){let a=await n[0]().then(l=>l.default);o=()=>$(a,e,()=>$(i.slot))}else o=this.#t[rt]==="Widget"?()=>$(this.#t,e,()=>$(i.slot)):this.#t;i=new me(this,o,e),this.pages.set(t,i)}return this.page=i,r.render(i),i}}let j=0;const[bt,Ze]=[1,2],[yt,Ye]=["forward","back"],we="__scroll_history__",ve=w()?sessionStorage:u,Qt=w()?window.addEventListener:u,Xt=w()?window.removeEventListener:u;w()&&(history.scrollRestoration="manual");const gt=s=>{const t=P.scrollHistory;if(s){let e=s.target;if(e.id==="")return;t[j]={[e.id]:{x:e.scrollLeft,y:e.scrollTop}}}else c(et(t),([e])=>+e>=j&&delete t[+e]);ve?.setItem(we,W(t))};class P extends p{direction=yt;prev=u;routes=new Map;slot=new ge;static routers=new Set;constructor(){super(()=>$(this.slot)),w()&&P.routers.add(this)}set href(t){this.global.router.href=t}build(){if(w()){const t=()=>{const e=history.state?.index??0;j>e&&(this.direction=Ye),j<e&&(this.direction=yt),j=e,this.prev=this.href,this.href=U(location.href),this.resolve(location.href)};t(),Qt?.("popstate",t),Qt?.("scroll",gt,{capture:!0,passive:!1}),this.disposers.add(()=>{Xt?.("popstate",t),Xt?.("scroll",gt,{capture:!0})})}return super.build()}async resolve(t){if(!t)return;let e=U(t);for(let[,r]of this.routes){let i=await r.resolve(e.pathname,this.slot,{});if(i){this.global.router.routes=i;let n=[""],o=[];c(i,a=>(n=M(a.validPaths,l=>M(n,f=>f+l)).flat(),o.push(...n),n)),this.global.router.matchPaths=o;break}}c(this.global.router.navlinks,r=>r.checkActive()),P.dispatchEvent(),P.scrollRestoration()}static open(t,e){P.writeState(t,bt,e)}static forward(){history.forward()}static back(){history.back()}static replace(t){P.writeState(t,Ze)}static get scrollData(){return this.scrollHistory[j]??{}}static get scrollHistory(){return Te(ve?.getItem(we)??"{}")}static scrollRestoration(){if(w()){let t=P.scrollData??{x:0,y:0};c(et(t),([e,{x:r,y:i}])=>document.querySelector(`#${e}`)?.scrollTo(r,i))}}static writeState(t,e,r){if(!t)return;let i=U(t);if(!(w()&&i.href===location.href)){if(r&&r!=="_self")return open(i,r);e===bt&&j++,w()&&gt(),c(this.routers,n=>{n.direction=yt,w()&&(n.prev=U(location.href),history[e===bt?"pushState":"replaceState"]({index:j},"",i)),n.href=i,n.resolve(t)}),P.dispatchEvent()}}static dispatchEvent(){w()&&window.dispatchEvent(new Event("pathchange"))}}const Qe=s=>class extends P{static[rt]="Router";constructor(){super(),s(this)}};let Se={route(s,t,e){let r=new Je(s,t);this.routes.set(s,r),e?.(r)},group(s,t){let e=new ze(s);this.routes.set(s,e),t?.(e)},notfound(){}};m(G.prototype,Se);m(P.prototype,Se);m(H.prototype,{router:{routers:new Set,resolve(s){return M(this.routers,t=>t.resolve(s))},href:new URL("http://localhost"),routes:[],matchPaths:[],navlinks:new Set}});H.disposers.add(({router:s})=>{s.routers.clear(),s.routes=[],s.matchPaths=[],s.navlinks.clear()});m($,{router:s=>Qe(s),open:P.open,replace:P.replace,back:P.back,forward:P.forward,scrollRestoration:P.scrollRestoration,title(s){let t=p.proto;D(t,me)&&(t.title=s)}});globalThis.Link=ye;globalThis.NavLink=Ke;$.process.craft.add(s=>{if(N(s)&&s[rt]==="Router"){let t=p.proto,e=new s;return t?.global.router.routers.add(e),e.parent=t,e}});class Xe{#t=null;#e=null;constructor(t){N(t)?this.#e=t:this.#t=t}async context(){if(this.#t)return await this.#t;if(!this.#e)throw"I18n Context Fetch Error";return this.#t=this.#e().then(t=>t.default)}async find(t,e){e||(e=await this.context());const[r,...i]=t.split("."),n=e[r];return Ne(n)?i.length?this.find(i.join("."),n):n._:i.length?t:n}}class $e extends nt{i18n;key;options;constructor(t,e,r){super(),this.i18n=t,this.key=e,this.options=r,this.i18n.translations.add(this)}build(){return this.update(),this}async update(){const{key:t,i18n:e,options:r}=this,i=(n,o=[])=>{this.layout=()=>{n.raw=n,$(n,...o)},c(this.protos,a=>a.removeNode()),super.build(),this.node?.replaceWith(...this.toDOM())};t:{const n=e.dictionary();if(!n){i([t]);break t}const o=await n.find(t);if(R(o))break t;const a=o.split(/\$[a-zA-Z0-9_]+\$/);if(a.length===1||!r){i([o]);break t}const l=o.matchAll(/(\$([a-zA-Z0-9_]+)\$)/g);i(a,M(l,([,,f])=>r[f]))}return this}}class Ve{map=new Map;#t;translations=new Set;locale;constructor(t){this.#t=t,this.locale=t}defaultLocale(t){return arguments.length?(t&&(this.#t=t),this):this.#t}async setLocale(t){if(!arguments.length)return this.locale;if(t){if(!this.map.get(t))return t=t.split("-")[0],this.setLocale(t);t!==this.locale&&(this.locale=t,await Promise.all(M(this.translations,r=>r.update())))}return this}dictionary(t=this.locale){return t?this.map.get(t):u}translate(t,e){return new $e(this,t,e)}}m($,{i18n(s){const t=new Ve(s),e=(r,i)=>t.translate(r,i);return m(e,{i18n:t,async locale(r){await t.setLocale(r)},add(r,i){return t.map.set(r,new Xe(i)),this},delete(r){return t.map.delete(r),this},dir(r){return(i,n)=>t.translate(`${r}.${i}`,n)}}),e}});$.process.text.add(s=>{if(D(s,$e))return s});const L=(s,t)=>new _t((e,r)=>{s.onsuccess=i=>t?t(s,e):e(s.result),s.onerror=i=>r(s.error)});class Vt{#t;store;direction;constructor(t,e){this.#t=e,this.store=D(t,Pe)?t.store:t,this.direction=e.direction}get value(){return this.#t.value}get key(){return this.#t.key}get primaryKey(){return this.#t.primaryKey}async update(t){return L(this.#t.update(t))}async delete(){return L(this.#t.delete())}continue(t){this.#t.continue(t)}continuePrimaryKey(t,e){this.#t.continuePrimaryKey(t,e)}advance(t){this.#t.advance(t)}abort(){this.#t.request.transaction?.abort()}}class xe{#t;constructor(t){this.#t=t}cursor(t,e,r){return L(this.#t.openCursor(e,r),(i,n)=>i.result?t(new Vt(this,i.result)):n(null))}keyCursor(t,e,r){return L(this.#t.openCursor(e,r),(i,n)=>i.result?t(new Vt(this,i.result)):n(null))}count(t){return L(this.#t.count(t))}get(t){return L(this.#t.get(t))}getAll(t){return L(this.#t.getAll(t))}}class Pe extends xe{store;constructor(t,e,r){super(e),this.store=t,m(this,r)}}class ts extends xe{#t;constructor(t,e){super(t),this.#t=t,m(this,e)}put(t,e){return L(this.#t.put(t,e))}add(t,e){return L(this.#t.add(t,e))}delete(t){return L(this.#t.delete(t))}clear(){return L(this.#t.clear())}index(t){return new Pe(this,this.#t.index(t),this.indexes[t])}}class es{#t;#e;writable;stores={};durability;constructor(t,e){this.#t=e,this.#e=t,this.writable=e.mode!=="readonly",this.durability=e.durability,c(E(e.objectStoreNames),r=>{m(this.stores,{[r]:t.stores[r]})})}store(t){return new ts(this.#t.objectStore(t),this.#e.stores[t])}commit(){return this.#t.commit()}abort(){return this.#t.abort()}}class te{idb;name;version;constructor(t,e){this.idb=t,this.name=t.name,this.version=t.version,m(this,e)}async store(t,e,r){return ct(e)?this.transaction(t,e,i=>r(i.store(t))):this.transaction(t,i=>e(i.store(t)))}async transaction(t,e,r){r=ct(e)?r:e,e=ct(e)?e:!1;const i=this.idb.transaction(t,e?"readwrite":"readonly"),n=new es(this,i),o=r(n);return new _t((a,l)=>{i.oncomplete=f=>a(o),i.onerror=i.onabort=f=>i.error&&l(i.error)})}}class ss{config;upgrades=new Map;indexes=new Map;constructor(t){this.config=t}keyPath(t){return this.config.keyPath=t,this}autoIncrement(t){return this.config.autoIncrement=t,this}schema(){return this}index(t,e){return this.indexes.set(t,{...e,name:t,multiEntry:e.multiEntry??!1,unique:e.unique??!1}),this}upgrade(t,e){return this.upgrades.set(t,e),this}}const mt="objectStoreNames",ee="deleteObjectStore",se="createObjectStore",re=indexedDB,ie="onupgradeneeded",ne="onsuccess";class rs{#t=!1;storeMap=new Map;#e=!1;constructor(t){m(this,t)}devMode(t){return this.#e=t,this}deleteUnused(t){return this.#t=t,this}store(t,e){return this.storeMap.set(t,N(e)?e(new ss({autoIncrement:!1,keyPath:null,indexes:{},name:t,schema:null})):e),this}async open(){return new _t((t,e)=>{const{version:r,name:i,storeMap:n}=this,o=re.open(i),a=new Map,l=new Map,f=new Map,h=new Map,S=[],y=g=>this.#e&&console.debug(`[$IDBBuilder (${i})]`,g),C=Ut(E(n).map(([g,{config:{keyPath:k,autoIncrement:O},indexes:d}])=>[g,{autoIncrement:O,keyPath:k,name:g,schema:u,indexes:Ut(E(d).map(([x,{keyPath:b,multiEntry:v,unique:_}])=>[x,{keyPath:b,multiEntry:v,unique:_}]))}])),q={version:r,name:i,stores:C},ut=()=>{y("No IDB detected, create IDB");const{transaction:g,result:k}=o;c(n,([O,d])=>{a.set(O,d),l.set(d,new Map(d.indexes))}),k.version===r?ht(o):g.oncomplete=O=>{const d=indexedDB.open(i,r);d.onupgradeneeded=x=>ht(d)}},Me=async()=>{y("IDB Detected");const g=o.result,k=new te(g,q),O=g[mt].length?g.transaction(E(g[mt]),"readonly"):null,d=()=>{y("No Upgrade"),t(k)};if(g.version===r||(O&&c(E(O[mt]),b=>n.has(b)&&S.push(b)),c(n,([b,v])=>{const{keyPath:_,autoIncrement:K}=v.config,I=new Map,T=()=>c(v.indexes,([J,ot])=>{const[at]=qt(()=>z?.index(J)),_e=W(ot.keyPath)!==W(at?.keyPath)||!!ot.multiEntry!==at?.multiEntry||!!ot.unique!==at?.unique;(!at||_e)&&(I.set(J,ot),l.set(v,I))}),[z]=qt(()=>O?.objectStore(b));if(!z)return a.set(b,v),T();const De=E(v.upgrades).find(([J])=>r>=J&&g.version<J),Ie=W(_)!==W(z.keyPath)||K!==z?.autoIncrement,ke=De||Ie;T(),!(z&&!ke)&&f.set(b,v)}),r===g.version&&!a.size&&!f.size&&!S.length&&!l.size))return d();for(const[b,v]of f){const _=[],K=E(v.upgrades).filter(([I])=>r>=I&&g.version<I).sort((I,T)=>I[0]-T[0]).map(I=>I[1]);await k.transaction(b,!1,async I=>{h.set(b,_),await I.store(b).cursor(async T=>{_.push({key:T.key,value:T.value}),T.continue()})});for(const I of K)h.set(b,await I(_,k))}g.close();const x=re.open(i,r);x[ie]=b=>ht(x),x[ne]=b=>{y("IDB Upgrade Completed"),t(new te(x.result,q))}},ht=g=>{y("Upgrade DB");const k=g.result,O=g.transaction;c(a,([d,{config:x}])=>{k[se](d,x),y(`Store Created: ${d}`)}),c(f,([d,{config:x}])=>{k[ee](d),k[se](d,x),y(`Store Upgraded: ${d}`)}),c(l,([{config:{name:d}},x])=>{const b=O.objectStore(d);c(x,([v,{keyPath:_,...K}])=>{b.indexNames.contains(v)&&b.deleteIndex(v),b.createIndex(v,_,K),y(`Store '${d}' Index Created: ${v}`)})}),this.#t&&c(S,d=>{k[ee](d),y(`Unused Store Deleted: ${d}`)}),c(h,([d,x])=>{const b=O.objectStore(d);c(x,({key:v,value:_})=>{b.autoIncrement||b.keyPath?b.add(_):b.add(_,v)}),y(`Recovered Store Objects: ${x.length} objects of store '${d}'`)})};o[ie]=ut,o[ne]=Me,o.onerror=g=>e(o.error)})}}m($,{idb:(s,t)=>new rs({name:s,version:t,stores:{}})});m(H.prototype,{prefetch:{fetches:new Set,caches:{}}});H.disposers.add(s=>{s.prefetch.fetches.clear()});globalThis.prefetch||(globalThis.prefetch={});m($,{async fetch(s,t){s=U(s);let e=p.proto,r=w()?prefetch[s.href]:u,i=t?.then;return new Promise(async o=>{if(r&&Date.now()<r.expired){i?.(r.data),o(r);return}let a=await fetch(s,t),l=t?.record;if(l){const f=ue(l)?await l(a):l(a);$.context(p,e,()=>{i?.(f)}),o(f)}})}});m($,{meta(s){if(w())return;let t=p.proto;t&&(t.global.meta=s)}});const At=class At extends it{constructor(t,e){super("slide",t,e)}};$.style(At,"slide{display:block;height:100%;width:100%;position:absolute}");let oe=At;var F;const Tt=class Tt extends it{constructor({index:e,interval:r,autoplay:i,animation:n,...o},a){super("slideshow",o,a);B(this,"slide",u);B(this,"index");B(this,"timer",u);B(this,"interval");B(this,"autoplay");B(this,"animation");Bt(this,F,0);this.index=e??0,this.interval=r??5,this.autoplay=i??!1,this.animation=n??u,this.disposers.add(()=>this.pause()),this.ondom(()=>{this.autoplay&&this.play()})}build(){return super.build(),this.switch(this.index),this}toString(){return this.parseHTML({children:this.slide?.toString()})}toDOM(e=!0){return super.toDOM(!1),e&&this.slide&&this.node?.append(...this.slide.toDOM()),[this.node]}play(){this.timer=setInterval(()=>{Wt(this,F)._++,dt(this,F)>=this.interval*100&&(this.next(),ft(this,F,0))},10)}pause(){this.timer&&clearTimeout(this.timer)}next(){let e=this.children.length,r=this.index+1;r>=e&&(r=0),this.switch(r)}prev(){let e=this.children.length,r=this.index-1;r<=0&&(r=e-1),this.switch(r)}switch(e){this.index=e;let r=this.children.at(e);this.slide!==r&&r&&(this.animation?this.animation(this,r,this.slide):(r.parent=this,this.slide=r,this.node?.replaceChildren(...r.toDOM())))}};F=new WeakMap,$.style(Tt,"slideshow{display:block;position:relative;overflow:clip}");let ae=Tt;
