(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();const h=null,bt=Object,C=bt.entries,S=bt.assign,mt=Array,R=mt.from,c=async(s,t)=>{let e=0,r=async()=>{for(let o of s)await t(o,e,s),e++},i=()=>{for(let o of s)t(o,e,s),e++};return It(t)?r():i()},w=(s,t)=>R(s).map(t),I=(s,t)=>typeof s===t,K=(s,...t)=>!!t.find(e=>e===s),gt=s=>I(s,"string"),_t=s=>I(s,"boolean"),kt=s=>I(s,"number"),Et=s=>I(s,"object"),v=s=>I(s,"function"),It=s=>b(s,(async()=>0).constructor),M=s=>s===void 0,D=mt.isArray,b=(s,...t)=>!!t.find(e=>s instanceof e),Tt=(s,t)=>b(s,t)?s:h,yt=JSON.stringify,wt=JSON.parse,lt=(s,...t)=>!!t.find(e=>s.startsWith(e)),G="abcdefghijklmnopqrstuvwxyz",at=G.toUpperCase(),At=s=>{s={length:5,lettercase:"any",...s};const t=s.lettercase==="any"?G+at:s.lettercase==="lower"?G:at;return R({length:s.length},(e,r)=>t[Math.round(Math.random()*t.length)]).join("")},tt=Symbol("ProtoType");class u{static proto=h;static[tt]="Proto";protos=new Set;disposers=new Set;builder;#t=h;constructor(t){this.builder=t??h}set parent(t){this.#t?.protos.delete(this),this.#t=t,t?.protos.add(this)}get parent(){return this.#t}build(t=!0){return t&&this.clear(!0),$.context(u,this,()=>this.builder?.()),c(this.protos,e=>{e.build()}),this}toString(){return w(this.protos,t=>`${t}`).join("")}toDOM(){return w(this.protos,t=>t.toDOM()).flat()}dispose(){c(this.disposers,t=>t()),c(this.protos,t=>t.dispose())}removeNode(){c(this.protos,t=>t.removeNode())}clear(t=!1){this.protos.clear(),t&&c(this.protos,e=>e.dispose())}findAbove(t){let e=this.parent;return e?t(e)?e:e.findAbove(t):h}}class et extends u{node=h;modifiers=new Set;constructor(t){super(t)}dom(t){this.modifiers.add(t)}removeNode(){this.node?.remove()}}const Wt=["img","hr","br","input","link","meta"];class st extends et{name;attr=new Map;constructor(t,e,r){super(()=>r?.(this)),this.name=t,e&&this.attrProcess(e)}on(t,e){this.dom(r=>{r.addEventListener(t,e),this.disposers.add(()=>r.removeEventListener(t,e))})}toString(){let t=this.name,e=w(this.protos,o=>`${o}`).join(""),r=w(this.attr,([o,n])=>n.length?`${o}="${n}"`:o),i=r.length?` ${r.join(" ")}`:"";return Wt.includes(t)?`<${t}${i} />`:`<${t}${i}>${e}</${t}>`}toDOM(){if(this.node)return[this.node];let t=document.createElement(this.name);return this.node=t,c(this.attr,([e,r])=>t.setAttribute(e,r)),c(this.modifiers,e=>e(t)),t.append(...w(this.protos,e=>e.toDOM()).flat()),[t]}attrProcess(t){c(C(t),([e,r])=>{for(let i of $.process.attr){let o=i(e,r,this);if(!M(o))return}this.attr.set(e,r)})}}class q extends et{content;constructor(t){super(),this.content=t}toString(){return this.content}toDOM(){if(this.node)return[this.node];let t=new Text(this.content);return this.node=t,c(this.modifiers,e=>e(t)),[t]}}const y=s=>!0;class T extends et{constructor(t){super(t),y()&&(this.node=new Text)}toDOM(){return[this.node,...super.toDOM()]}removeNode(){super.removeNode(),c(this.protos,t=>t.removeNode())}}const Ct=(s,t)=>!1;function _(...s){const t=u.proto;let e=[];const r=a=>{a.parent=t,e.push(a)};for(let a of _.process.craft){let l=a(...s);if(!M(l))return l}const[i,o,n]=s;if(b(i,u))return r(i),i;if(gt(i)){let a=v(o)?[,o]:[o,n],l=new st(i,...a);return r(l),l}if(v(i)){let[,...a]=s,l=new i(...a);if(b(l,u))return r(l),l}if(D(i)){let a=d=>{for(let g of _.process.text){let P=g(d);if(!M(P))return r(P)}let m=M(d)?h:new q(`${d}`);m&&r(m)},[l,...f]=s;return l.raw?c(l,(d,m)=>{let g=d.length?new q(d):h,P=f[m];g&&r(g),a(P)}):c(l,d=>a(d)),e}}(s=>{s.process={craft:new Set,text:new Set,attr:new Set},s.dispose=t=>{u.proto?.disposers.add(t)},s.render=(t,e)=>{if(e=v(e)?e():e,!Ct()){let r=t.build().toDOM();e.replaceChildren(...r)}},s.context=(t,e,r)=>{let i=t.proto;t.proto=e,r(),t.proto=i},s.stylesheet=y()?new CSSStyleSheet:h,s.style=t=>s.stylesheet?.insertRule(t),s.stylesheet&&document.adoptedStyleSheets.push(s.stylesheet)})(_||(_={}));globalThis.$=_;const Rt=(s,t,e)=>class extends u{static[tt]="Widget";static stores=t;constructor(...r){super(()=>{let i=r[0],o=r[1],[n,a]=e(i),l=v(n)?{}:n,f=v(n)?n:a;c(s,d=>{let m=this.findAbove(g=>g.constructor===d);if(m){let g=d.stores.get(m);S(l,g)}}),t.set(this,l),f({store:l,children:()=>o?.(u.proto)})})}};S($,{widget(s,t){let e=D(s)?s:[],r=v(s)?s:t;return Rt(e,new WeakMap,r)}});let k=!1,N=new Set,z=s=>{k=!1;let t=s();return k=!0,t},ct=s=>{k=!0;let t=s(z);return k=!1,t},$t=new WeakMap,O=s=>$t.get(s);class E{key;constructor(t){const e=()=>(k&&N.add(this),O(e).value);return Object.setPrototypeOf(e,this),$t.set(e,{value:t,subs:new Set}),this.key=e,e}get value(){return O(this.key).value}get subs(){return O(this.key).subs}set(t){v(t)?this.set(t(this.value)):this.value!==t&&(O(this).value=t,this.emit())}modify(t){t(this.value),this.emit()}emit(){c(O(this).subs,t=>t(this.value))}subscribe(t){this.subs.add(t)}unsubscribe(t){this.subs.delete(t)}toString(){return`${this.value}`}}S($,{signal(s){return new E(s)},effect(s){ct(s),c(N,t=>t.subscribe(e=>s(z))),N.clear()},compute(s){let t=ct(s),e=new E(t);return c(N,r=>r.subscribe(i=>e.set(s(z)))),N.clear(),e}});let St=s=>{if(b(s,E)){let t=new q(`${s}`);t.dom(r=>{let i=o=>r.textContent=`${o}`;s.subscribe(i),t.disposers.add(()=>s.unsubscribe(i))});let e=r=>t.content=`${r}`;return s.subscribe(e),e(s.value),t.parent=u.proto,t}},Dt=(s,t,e)=>{s in t?t[s]=e.value:t.setAttribute(s,`${e}`)};$.process.text.add(St);$.process.craft.add(St);$.process.attr.add((s,t,e)=>{if(b(t,E)){if(e.name==="input"){if(K(s,"value","checked")){e.on("input",i=>t.set(i.currentTarget[s]));let r=t.value;_t(r)?r&&e.attr.set(s,""):e.attr.set(s,`${r}`)}}else e.dom(r=>{let i=()=>Dt(s,r,t);t.subscribe(i),i(),e.disposers.add(()=>t.unsubscribe(i))});return!0}});const jt=new WeakMap,Ft=new Set,ut=new Map;class vt{}class rt extends vt{declarations=new Map;rules=new Map;selector;css;constructor(t,e){super(),this.selector=t,e&&Ut(this,e),this.css=e}toString(){let t=w(this.declarations,([r,i])=>`${r.replaceAll(/[A-Z]/g,o=>`-${o.toLowerCase()}`)}: ${i};`),e=w(this.rules,([r,i])=>`${i}`);return`${this.selector} { ${[...t,...e].join(" ")} }`}}const Ut=(s,t)=>{for(let[e,r]of C(t))gt(r)||kt(r)||b(r,vt)?s.declarations.set(e,`${r}`):s.rules.set(e,new rt(e,r))},dt=(s,t,e=!0)=>{let r=e?yt(t):"";if(e){let o=ut.get(r);if(o)return o}let i=new rt(s(),t);return $.style(`${i}`),e&&ut.set(r,i),i},ht=new Set,xt=(s="any")=>{const t=At({lettercase:s});return ht.has(t)?xt(s):(ht.add(t),t)};S($,{css(s){return b(s,rt)?s:dt(()=>`.${xt()}`,s)},CSS(s){return w(C(s),([t,e])=>{let r=dt(()=>t,e);return Ft.add(r),r})}});S(st.prototype,{css(s){return Pt(this,s),this}});const Pt=(s,t)=>{let e=$.css(t),r=e.selector.slice(1);s.attr.set("class",s.attr.get("class")?.concat(r)??r),jt.set(s,e)};$.process.attr.add((s,t,e)=>{if(s==="css")return Pt(e,t),!0});class H extends T{list$;#t=new WeakMap;constructor(t,e){super(e),this.list$=t;let r=()=>{let{n:i,d:o}=this.run();c(i,l=>l.build()),c(o,l=>l.removeNode());let n=this.toDOM(),a;c(n,l=>{l.parentNode?a=l:a=a?.parentNode?.insertBefore(l,a.nextSibling)})};this.list$.subscribe(r),this.disposers.add(()=>this.list$.unsubscribe(r))}build(){return this.#t=new WeakMap,this.run(),c(this.protos,t=>t.build()),this}run(){let t=[],e=new Set(this.protos);return this.clear(),c(this.list$.value,(r,i)=>{let o=this.#t.get(r);o?e.has(o)&&e.delete(o):(o=new Bt,t.push(o),this.#t.set(r,o),o.builder=()=>this.builder(r,i)),o.parent=this}),{n:t,d:e}}removeNode(){this.node?.remove(),c(this.protos,t=>t.removeNode())}}class Bt extends u{}globalThis.For=H;$.process.craft.add((s,t,e)=>{if(s===H){let r=new H(t,e);return r.parent=u.proto,r}});class it extends u{exp$;constructor(t,e){super(e),this.exp$=t}validate(){return this.exp$?!!this.exp$.value:!0}}class Z extends it{}class V extends it{}class Y extends it{}class ft extends T{statements=new Set;build(){super.build(),this.validate();let t=()=>{let e=this.validate();c(this.statements,r=>r!==e&&r.removeNode()),this.node?.replaceWith(...this.toDOM())};return c(this.statements,e=>{e.build(),e.exp$?.subscribe(t),e.disposers.add(()=>e.exp$?.unsubscribe(t))}),this}validate(){this.clear();for(let t of this.statements)if(t.validate())return t.parent=this,t}}globalThis.If=Z;globalThis.Else=V;globalThis.ElseIf=Y;let j=new WeakMap;$.process.craft.add((s,t,e)=>{let r=u.proto,i=r?j.get(r):h;if(s===Z&&(i=new ft,r&&(i.parent=r,j.set(r,i))),!b(i,ft)){if(K(s,V,Y))throw"ElseIf/Else must be after If or ElseIf";return}if(K(s,Z,V,Y)){let o=b(t,E)?[t,e]:[h,t],n=new s(...o);i.statements.add(n)}else{r&&j.delete(r);return}return i});class ot extends u{condition;constructor(t,e){super(e),this.condition=D(t)?t:[t]}}class W extends T{exp$;cases=new Set;matched=h;constructor(t,e){super(()=>{e((r,i,o)=>this.case(i,o))}),this.exp$=t}build(){super.build(),this.validate();let t=()=>{let e=this.matched,r=this.validate();e!==r&&(c(this.cases,i=>i!==r&&i.removeNode()),this.node?.replaceWith(...this.toDOM()))};return c(this.cases,e=>{e.build(),this.exp$.subscribe(t),e.disposers.add(()=>this.exp$.unsubscribe(t))}),this}case(t,e){let r=new ot(t,e);return this.cases.add(r),r}validate(){this.clear();for(let t of this.cases)if(t.condition.includes(this.exp$.value))return t.parent=this,this.matched=t}}globalThis.Match=W;globalThis.Case=ot;$.process.craft.add((s,t,e)=>{if(s===W){let r=new W(t,e);return r.parent=u.proto,r}if(s===ot)return Tt(u.proto,W)?.case(t,e)});class nt{routes=new Map;path;aliases=new Map;constructor(t){this.path=t}async resolve(t,e,r){return!0}routing(t){let e=t.split("/"),r={},i="";t:for(let o of[this.path,...this.aliases.keys()]){let n=this.aliases.get(o);r={};let a=o.split("/"),l=[];for(let f=0;f<Math.max(e.length,a.length);f++)l.push([a[f],e[f]]);e:for(let[f,d]of l){let m=()=>{i=""},g=()=>{i+=(i!=="/"?"/":"")+d};if(M(f))break e;if(M(d)){m();continue t}if(f?.includes(":")){let[P,Nt]=f.split(":");if(!d.startsWith(P)){m();continue t}r[Nt]=d.replace(P,""),g();continue e}if(f!==d){m();continue t}g()}if(!i)continue t;r={...r,...v(n)?n():n};break t}return i?[i,r]:!1}alias(t,e){this.aliases.set(t,e)}}class Mt extends T{page=h;constructor(){super()}render(t){if(this.clear(),this.builder=()=>$(t),t.parent=this,this.page!==t&&this.page?.removeNode(),this.page=t,this.node){t.builded||t.build();let e=this.toDOM();this.node.replaceWith(...e)}}}let x=0;const A=URL,[F,Jt]=[1,2],[U,Kt]=["forward","back"],Q="__scroll__",pt=y()?document.documentElement:h,X=y()?sessionStorage:h,B=addEventListener,L=s=>b(s,A)?s:lt(s,"http")?new A(s):y()?new A(lt(s,origin)?s:origin+s):new A("https://localhost"+s),J=s=>{const t=wt(X?.getItem(Q)??"{}");t[x]={x:pt.scrollLeft,y:pt.scrollTop},s||c(C(t),([e])=>+e>x&&delete t[+e]),X?.setItem(Q,yt(t))};class p extends u{direction=U;prev=h;url=y()?L(location.href):h;routes=new Map;slot=new Mt;static routers=new Set;constructor(){super(()=>$(this.slot)),p.routers.add(this)}build(){return y()&&(this.resolve(location.href),B("popstate",()=>{const e=history.state?.index??0;x>e&&(this.direction=Kt),x<e&&(this.direction=U),x=e,this.prev=this.url,this.url=L(location.href),this.resolve(location.href)}),B("beforeunload",J),B("scroll",J,!1)),super.build()}async resolve(t){if(!t)return;let e=L(t);for(let[,r]of this.routes)if(await r.resolve(e.pathname,this.slot,{}))break;if(y()){let{x:r,y:i}=p.scroll??{x:0,y:0};scrollTo(r,i)}}static open(t,e){p.state(t,F,e)}static forward(){history.forward()}static back(){history.back()}static replace(t){p.state(t,Jt)}static get scroll(){return wt(X?.getItem(Q)??"{}")[x]??{x:0,y:0}}static state(t,e,r){if(!t)return;let i=L(t);if(!(y()&&i.href===location.href)){if(r&&r!=="_self")return open(i,r);e===F&&x++,y()&&J(),c(this.routers,o=>{o.direction=U,y()&&(o.prev=L(location.href),history[e===F?"pushState":"replaceState"]({index:x},"",i)),o.url=i,o.resolve(t)})}}}class Gt extends st{constructor(t,e){super("a",t,e),this.on("click",r=>{if(r.shiftKey||r.ctrlKey)return;r.preventDefault();let i=this.attr.get("target"),o=this.attr.get("href");o&&(i==="_replace"?$.replace(o):$.open(o,i))})}}class qt extends u{slot=new Mt;builded=!1;route;constructor(t,e,r){super(()=>e({params:r})),this.route=t}build(){return this.builded||(this.builded=!0),super.build()}}class zt extends nt{pages=new Map;page=h;layout;constructor(t,e){super(t),this.layout=e}async resolve(t,e,r){let i=this.pages.get(t);if(i)return e.render(i),!0;let o=this.routing(t);if(!o)return!1;let[n,a]=o;r={...r,...a};let l=await this.usePage(n,r,e),f=n==="/"?t:t.replace(n,"");return f?!!R(this.routes).find(d=>d[1].resolve(f,l.slot,r)):!0}async usePage(t,e,r){let i=this.layout,o;if(D(i)){let a=await i[0]().then(l=>l.default);o=()=>$(a,e)}else o=this.layout[tt]==="Widget"?()=>$(this.layout,e):this.layout;let n=new qt(this,o,e);return this.page=n,this.pages.set(t,n),r.render(n),n}}class Ht extends nt{constructor(t){super(t)}async resolve(t,e,r){let i=this.routing(t);if(!i)return!1;let[o,n]=i;r={...r,...n};let a=t.replace(o,"");return!!R(this.routes).find(l=>l[1].resolve(a||"/",e,r))}}let Ot={route(s,t,e){let r=new zt(s,t);this.routes.set(s,r),e?.(r)},group(s,t){let e=new Ht(s);this.routes.set(s,e),t?.(e)},notfound(){}};S(nt.prototype,Ot);S(p.prototype,Ot);S($,{open:p.open,replace:p.replace,back:p.back,forward:p.forward});globalThis.Link=Gt;globalThis.Router=p;$.process.craft.add((s,t)=>{if(s===p){let e=new p;return e.parent=u.proto,t(e),e}});class Zt{#t=null;#e=null;constructor(t){v(t)?this.#e=t:this.#t=t}async context(){if(this.#t)return await this.#t;if(!this.#e)throw"I18n Context Fetch Error";return this.#t=this.#e().then(t=>t.default)}async find(t,e){e||(e=await this.context());const[r,...i]=t.split("."),o=e[r];return Et(o)?i.length?this.find(i.join("."),o):o._:i.length?t:o}}class Lt extends T{i18n;key;options;constructor(t,e,r){super(),this.i18n=t,this.key=e,this.options=r,this.i18n.translations.add(this)}build(){return this.update(),this}async update(){const{key:t,i18n:e,options:r}=this,i=(o,n=[])=>{this.builder=()=>{o.raw=o,$(o,...n)},c(this.protos,a=>a.removeNode()),super.build(),this.node?.replaceWith(...this.toDOM())};t:{const o=e.dictionary();if(!o){i([t]);break t}const n=await o.find(t);if(M(n))break t;const a=n.split(/\$[a-zA-Z0-9_]+\$/);if(a.length===1||!r){i([n]);break t}const l=n.matchAll(/(\$([a-zA-Z0-9_]+)\$)/g);i(a,w(l,([,,f])=>r[f]))}return this}}class Vt{map=new Map;#t;translations=new Set;locale;constructor(t){this.#t=t,this.locale=t}defaultLocale(t){return arguments.length?(t&&(this.#t=t),this):this.#t}async setLocale(t){if(!arguments.length)return this.locale;if(t){if(!this.map.get(t))return t=t.split("-")[0],this.setLocale(t);t!==this.locale&&(this.locale=t,await Promise.all(w(this.translations,r=>r.update())))}return this}dictionary(t=this.locale){return t?this.map.get(t):h}translate(t,e){return new Lt(this,t,e)}}S($,{i18n(s){const t=new Vt(s),e=(r,i)=>t.translate(r,i);return S(e,{i18n:t,async locale(r){await t.setLocale(r)},add(r,i){return t.map.set(r,new Zt(i)),this},delete(r){return t.map.delete(r),this},dir(r){return(i,o)=>t.translate(`${r}.${i}`,o)}}),e}});$.process.text.add(s=>{if(b(s,Lt))return s});
